nelmio_api_doc:
    documentation:
        info:
            title: Lendora Librairie
            description: This is an awesome app!
            version: 1.0.0
            x-build: #CommitHash
        security:
            - Bearer: []
        paths:
            /api/authors:
                get:
                    tags:
                        - Authors
                    summary: Get all authors.
                    responses:
                        "200":
                            description: OK
                            content:
                                application/json:
                                    schema:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                id:
                                                    type: integer
                                                name:
                                                    type: string
                                                lastName:
                                                    type: string
                                                birthday:
                                                    type: date
                                                biography:
                                                    type: string
                post:
                    tags:
                        - Author
                    summary: Create a new author.
                    requestBody:
                        content:
                            application/json:
                                schema:
                                    type: object
                                    properties:
                                        name:
                                            type: string
                                        lastName:
                                            type: string
                                        birthday:
                                            type: date
                                        biography:
                                            type: string
                    responses:
                        "201":
                            description: Created
                            content:
                                application/json:
                                    schema:
                                        type: object
                                        properties:
                                            id:
                                                type: integer
                                            name:
                                                type: string
                                            lastName:
                                                type: string
                                            birthday:
                                                type: date
                                            biography:
                                                type: string
                        "400":
                            description: Invalid JSON.
                security: [ ]
            /api/authors/{id}:
                get:
                    tags:
                        - Author
                    summary: Get author by id
                    parameters:
                        - name: id
                          in: path
                          required: true
                          schema:
                              type: integer
                    responses:
                        "200":
                            description: OK
                            content:
                                application/json:
                                    schema:
                                        type: object
                                        properties:
                                            id:
                                                type: integer
                                                example: 1
                                            name:
                                                type: string
                                                example: "John"
                                            lastName:
                                                type: string
                                                example: "Doe"
                                            birthday:
                                                type: string
                                                format: date
                                                example: "1980-01-01"
                                            biography:
                                                type: string
                                                example: "Author of many great books."
                        "404":
                            description: Not found
            /api/books:
                get:
                    tags:
                        - Books
                    summary: Get all authors.
                    responses:
                        "200":
                            description: OK
                            content:
                                application/json:
                                    schema:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                title:
                                                    type: string
                                                releaseDate:
                                                    type: date
                                                blurb:
                                                    type: string
                                                genre:
                                                    type: collection
                                                author:
                                                    type: collection
                post:
                    tags:
                        - Books
                    summary: Create a new book
                    description: Creates a new book and associates it with an author and one or more genres.
                    requestBody:
                        required: true
                        content:
                            application/json:
                                schema:
                                    type: object
                                    required:
                                        - title
                                        - releaseDate
                                        - blurb
                                        - authorId
                                    properties:
                                        title:
                                            type: string
                                            example: "My Good Book"
                                        releaseDate:
                                            type: string
                                            format: date-time
                                            example: "2025-11-11T00:00:00+00:00"
                                        blurb:
                                            type: string
                                            example: "This is a good book about Symfony and API."
                                        authorId:
                                            type: integer
                                            example: 10
                                        genreIds:
                                            type: array
                                            items:
                                                type: integer
                                            example: [ 2, 3 ]
                    responses:
                        "201":
                            description: Book created successfully
                            content:
                                application/json:
                                    schema:
                                        type: object
                                        properties:
                                            id:
                                                type: integer
                                                example: 5
                                            title:
                                                type: string
                                                example: "My Good Book"
                                            releaseDate:
                                                type: string
                                                format: date-time
                                                example: "2025-11-11T00:00:00+00:00"
                                            blurb:
                                                type: string
                                                example: "This is a good book about Symfony and API."
                                            author:
                                                type: object
                                                properties:
                                                    id:
                                                        type: integer
                                                        example: 1
                                                    name:
                                                        type: string
                                                        example: "John"
                                                    lastName:
                                                        type: string
                                                        example: "Doe"
                                            genres:
                                                type: array
                                                items:
                                                    type: object
                                                    properties:
                                                        id:
                                                            type: integer
                                                            example: 2
                                                        name:
                                                            type: string
                                                            example: "Fiction"
                        "400":
                            description: Validation error
                            content:
                                application/json:
                                    schema:
                                        type: object
                                        properties:
                                            message:
                                                type: string
                                                example: "Validation failed."
                                            errors:
                                                type: object
                                                additionalProperties:
                                                    type: string
                        "404":
                            description: Author or Genre not found
                            content:
                                application/json:
                                    schema:
                                        type: object
                                        properties:
                                            message:
                                                type: string
                                                example: "Author not found."
    areas: # to filter documented areas
        path_patterns:
            - ^/api(?!/doc$)
        host_patterns:
            - ^api\.
